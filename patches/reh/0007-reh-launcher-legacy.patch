From 0b07705a62b7870c143aa741d5922eeb1997cdba Mon Sep 17 00:00:00 2001
From: James <aslan.jnn@gmail.com>
Date: Sat, 14 Feb 2026 13:07:15 +1100
Subject: REH launcher: remove patchelf and cd to node's directory

---
 resources/server/bin/code-server-linux.sh | 13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)

diff --git a/resources/server/bin/code-server-linux.sh b/resources/server/bin/code-server-linux.sh
index 20df7cda4df..c9ce4c0e2d5 100644
--- a/resources/server/bin/code-server-linux.sh
+++ b/resources/server/bin/code-server-linux.sh
@@ -8,15 +8,6 @@ case "$1" in
 esac
 
 ROOT="$(dirname "$(dirname "$(readlink -f "$0")")")"
+cd "$ROOT" || exit 1
 
-# Set rpath before changing the interpreter path
-# Refs https://github.com/NixOS/patchelf/issues/524
-if [ -n "$VSCODE_SERVER_CUSTOM_GLIBC_LINKER" ] && [ -n "$VSCODE_SERVER_CUSTOM_GLIBC_PATH" ] && [ -n "$VSCODE_SERVER_PATCHELF_PATH" ]; then
-	echo "Patching glibc from $VSCODE_SERVER_CUSTOM_GLIBC_PATH with $VSCODE_SERVER_PATCHELF_PATH..."
-	"$VSCODE_SERVER_PATCHELF_PATH" --set-rpath "$VSCODE_SERVER_CUSTOM_GLIBC_PATH" "$ROOT/node"
-	echo "Patching linker from $VSCODE_SERVER_CUSTOM_GLIBC_LINKER with $VSCODE_SERVER_PATCHELF_PATH..."
-	"$VSCODE_SERVER_PATCHELF_PATH" --set-interpreter "$VSCODE_SERVER_CUSTOM_GLIBC_LINKER" "$ROOT/node"
-	echo "Patching complete."
-fi
-
-"$ROOT/node" ${INSPECT:-} "$ROOT/out/server-main.js" "$@"
+./node ${INSPECT:-} "out/server-main.js" "$@"
-- 
2.50.1 (Apple Git-155)
